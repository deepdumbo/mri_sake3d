# Makefile generated by imake - do not edit!
# $Xorg: imake.c,v 1.6 2001/02/09 02:03:15 xorgcvs Exp $

#
#
#

# ====================================================================
#
#  Included macros and rules from <Imake.cf> and <Imake.rules>
#
# ====================================================================

PWD        = /home/ysfeng/surbeck/temp/sake/sim_linux
TOP        = /ESE_DV24.0_R01
OS_NAME    = Linux
OS_RELEASE = 2_6_18__194_17_1_el5

SHELL = /bin/sh

BASENAME = /bin/basename
CAT      = /bin/cat
CHMOD    = /bin/chmod
CP       = /bin/cp
CRYPT    = $(TOP)/3p_linux/enigma/bin/enigma
CUT      = /usr/bin/cut
DD       = /bin/dd
GREP     = /bin/grep
MV       = /bin/mv
RM       = /bin/rm -f
SORT     = /bin/sort
TAIL     = /usr/bin/tail
TAR      = /bin/tar
TOUCH    = /bin/touch

# ====================================================================

#
#
#
#
#
#

# ====================================================================
#
#  Common targets found in all makefiles
#
# ====================================================================

all:: hw sim

clean::

hw::

install::

sim::

test::

# ====================================================================

#
#
#
#
#
#

# ====================================================================
#
#  Beginning of included template file: "GCC_SIM_LINUX.tmpl"
#
# ====================================================================

#
# These are parameter definitions common to all users who use the
#    GCC compiler set.
#

AR   = $(GE_SIM_CCTOP)/bin/ar
CC   = $(GE_SIM_CCTOP)/bin/gcc
CPP  = $(GE_SIM_CCTOP)/bin/cpp
CXX  = $(GE_SIM_CCTOP)/bin/g++

STD_COMPILE_FLAGS =     $(ENV_GCC_SIM_CPPFLAGS)     -g     -Wall     $(WARNING_ERROR_FLAG)     -D_GE_SIMLINUX_BUILD

DEFAULT_CFLAGS =     $(STD_COMPILE_FLAGS)

DEFAULT_CXXFLAGS =     $(STD_COMPILE_FLAGS)

DEFAULT_OBJCPPFLAGS =     -Wall     -U__GNUC__     -Dconst=     -DUSE_STDARG     -DALLC

DEFAULT_SO_CFLAGS =     -fpic

DEFAULT_SO_CXXFLAGS =     -fpic

DEFAULT_LDFLAGS1 =     $(ENV_GCC_SIM_LDFLAGS)

DEFAULT_LDFLAGS2 =

DEFAULT_ARFLAGS    = cr

DEFAULT_CXXARFLAGS = -ar -WR,-v -o

# Global compiler flag concering warnings.  By default we don't treat
# warnings as errors.  Add -Werror to cause build errors on warnings.

WARNING_ERROR_FLAG =

#
# End common GCC parameter definitions.
#

#
# Macro which enables warnings to be treated as build errors.
# This macro has to be called before any other macros in the imake file!
#

# --------------------------------------------------------------------
#
#  Rule: "SuffixRules()"
#

.SUFFIXES:
.SUFFIXES: .c .cc .cpp .m .mi .o

SUFFIX_CFLAGS = $(SO_CFLAGS) $(CFLAGS1) $(DEFAULT_CFLAGS) $(CFLAGS2)

SUFFIX_CXXFLAGS = $(SO_CXXFLAGS) $(CXXFLAGS1) $(DEFAULT_CXXFLAGS) \
	$(CXXFLAGS2)

SUFFIX_FFLAGS = $(FFLAGS1) $(DEFAULT_FFLAGS) $(FFLAGS2)

SUFFIX_OBJCPPFLAGS = $(CPPFLAGS1) $(DEFAULT_OBJCPPFLAGS) $(CPPFLAGS2)

.c.o:
	$(RM) ${@F}
	$(CC) -c -o ${@F} $< $(SUFFIX_CFLAGS) \
		-UIMAKE_SIMLINUX_SUFFIXRULES

.cc.o:
	$(RM) ${@F}
	$(CXX) -c -o ${@F} $< $(SUFFIX_CXXFLAGS) \
		-UIMAKE_SIMLINUX_SUFFIXRULES

.cpp.o:
	$(RM) ${@F}
	$(CXX) -c -o ${@F} $< $(SUFFIX_CXXFLAGS) \
		-UIMAKE_SIMLINUX_SUFFIXRULES

.m.mi:
	$(RM) ${@F}
	$(CPP) -o ${@F} $< $(SUFFIX_OBJCPPFLAGS) \
		-UIMAKE_SIMLINUX_SUFFIXRULES

clean::
	-$(RM) *.mi *.o

# --------------------------------------------------------------------

# ====================================================================
#
#  End of included template file: "GCC_SIM_LINUX.tmpl"
#
# ====================================================================

#
#
#
#
#
#

# ====================================================================
#
#  Local Imakefile begins here
#
# ====================================================================

TOOLSET = SIM_LINUX

TOOLSET = EPIC

MAKE_TARGET = programs

PSD = bbepi

ADD_INLINE_FILES = touch.e

ADD_EFILES =

ADD_CFILES_HOST = getminesp.c

ADD_CFILES_TGT =

ADD_EFLAGS = -z

ADD_E_INCLUDES =

ADD_CFLAGS_HH = -Werror

ADD_CFLAGS_HS = -Werror

ADD_CFLAGS_TH = -Werror

ADD_CFLAGS_TS = -Werror

ADD_LINKFLAGS_HH =

ADD_LINKFLAGS_HS =

ADD_LINKFLAGS_TH =

ADD_LINKFLAGS_TS =

ADD_LIBS_HH =

ADD_LIBS_HS =

ADD_LIBS_TH =

ADD_LIBS_TS =

# --------------------------------------------------------------------
#
#  Rule: "UsePgenOnHost()"
#
#
#  This rule is empty for the GCC compiler set.  It is only used
#  by the Epic preprocessor.
#
# --------------------------------------------------------------------

# --------------------------------------------------------------------
#
#  Rule: "PsdParameters()"
#
#

VPATH = ..

#
#  Rule: "PsdSuffixRules()"
#

.SUFFIXES: .c .o-hs .o-ts

CFLAGS_HS  = $(CFLAGS1_HS) $(DEFAULT_CFLAGS) $(CFLAGS2_HS)
CFLAGS_TS  = $(CFLAGS1_TS) $(DEFAULT_CFLAGS) $(CFLAGS2_TS)

.c.o-hs:
	$(RM) ${@F}
	$(CC) -c -o ${@F} $< $(CFLAGS_HS) \
		-UIMAKE_SIMLINUX_PSDSUFFIXRULES

.c.o-ts:
	$(RM) ${@F}
	$(CC) -c -o ${@F} $< $(CFLAGS_TS) \
		-UIMAKE_SIMLINUX_PSDSUFFIXRULES

#
#  Rule: "PsdCleanRule()"
#

clean::
	-$(RM) *.o-hs *.o-ts

#
#  Rule: "StandardPsdParameters()"
#

PSD_INCLUDES = -I.. \
               -I$(TOP)/psd/include \
               -I$(TOP)/psd/include/private \
               -I$(TOP)/psd/psdsource \
               -I$(TOP)/lx/em/include \
               -I$(TOP)/lx/include \
               -I$(TOP)/host/foundation-libs/CnvEndianLib/sim_linux \
               -I$(TOP)/host/include \
               -I$(TOP)/mgd/include \
               -I$(TOP)/vre/support

# Locking flag to modify CVs.
# Use -DMCVALL to allow all CVs to be modified.
M_CVS =

PSD_FLAGS    = $(M_CVS) \
               $(EPLUS_CFLAGS)

HOST_FLAGS   = -DHOST_TGT \
               -DMGD_IF

SIM_FLAGS    = -DERMES_DEBUG \
               -DSIM \
               -DSIM_IO

CFLAGS1_HS   = $(ADD_CFLAGS_HS) \
               $(PSD_INCLUDES)

CFLAGS2_HS   = $(PSD_FLAGS) \
               $(HOST_FLAGS) \
               $(SIM_FLAGS)

CFLAGS1_TS   = $(ADD_CFLAGS_TS) \
               $(PSD_INCLUDES)

CFLAGS2_TS   = $(PSD_FLAGS) \
               $(SIM_FLAGS) \
               -DMGD_TGT \
               -DMGD \
               -DIPG \
               -DIPGHWTGT

PSD_LDFLAGS      = -L.. \
                   -L$(TOP)/psd/lib \
                   -L$(TOP)/mgd/lib/sim_linux

HOST_LINKDIRS    = -L$(TOP)/lx/lib/sim_linux \
                   -L$(TOP)/host/lib/sim_linux

ENDIAN_LDFLAGS   = -lCnvEndianBase_sim

HOST_EXTERN_LIBS = -lop_keyPortableC_sim \
                   -lgemshid_sim

LDFLAGS1_HS      = $(ADD_LINKFLAGS_HS) \
                   $(PSD_LDFLAGS) \
                   $(HOST_LINKDIRS)

LDFLAGS2_HS      = -lcv_const_hs \
                   $(ADD_LIBS_HS) \
                   $(EPLUS_FEATURES_LIB_HS) \
                   $(DBDT_LIB_HS) \
                   -lpgen_on_host_hs \
                   -L$(TOP)/host/lib/sim_linux     -lBurstMode_sim \
                   -lpsdsupport_ts \
                   -lpsdcrucial_ts \
                   -lpulsegen_hs \
                   -lpsdsupport_ts \
                   -lre_support_hs \
                   -lwavegensim_sim \
                   -lrspsim_sim \
                   -lpsdipgsim_stubs_hs \
                   -lepic_main_hs \
                   -lepic_rt_hs \
                   -lpsdsupport_hs \
                   -lpsdcrucial_hs \
                   -lrfextfile_sim \
                   -L$(FFTW_32_HOME)/lib     -lfftw3f \
                   -lpsdutil_hs \
                   $(HOST_EXTERN_LIBS) \
                   $(ENDIAN_LDFLAGS) \
                   -lepic_cm_hs \
                   -lre_support_hs\
                   -L$(TOP)/host/lib/sim_linux     -lCrcClassC_sim \
                   -L$(TOP)/host/lib/sim_linux     -ltime_profiler_client_sim \
                   -L$(TOP)/host/lib/sim_linux     -llog_trace_service_client_sim \
                   -L$(TOP)/host/lib/sim_linux     -luds_com_sim \
                   -L$(TOP)/host/lib/sim_linux     -lhash_table_c_sim \
                   -lm

LDFLAGS1_TS      = $(ADD_LINKFLAGS_TS) \
                   $(PSD_LDFLAGS) \
                   -u MGD_SSP_parse_W

LDFLAGS2_TS      = $(ADD_LIBS_TS) \
                   $(EPLUS_FEATURES_LIB_TS) \
                   -lpsdipgsim_ts \
                   -lpulsegen_ts \
                   -lepic_rt_ts \
                   -lwavegensim_sim \
                   -lrspsim_sim \
                   -lpsdplotpulse_sim \
                   -lpsdplotpulse_ts \
                   -lpsdutil_ts \
                   -lpsdsupport_ts \
                   -lpsdcrucial_ts \
                   -lpsdipcnet_sim \
                    -L$(TOP)/host/lib/sim_linux     -lCrcClassC_sim \
                   -lm \
                   -lrspdummy_sim

# --------------------------------------------------------------------

# --------------------------------------------------------------------
#
#  Rule: "BuildingEpicPsd()"
#
#

HS_OBJS = $(PSD).host.o-hs $(ADD_CFILES_HOST:.c=.o-hs)

TS_OBJS = $(PSD).tgt.o-ts $(ADD_CFILES_TGT:.c=.o-ts)

#
#  Rule: "PsdLink()"
#

HS_EXE = $(PSD).host
TS_EXE = $(PSD).tgt

sim $(MAKE_TARGET):: $(HS_EXE) $(TS_EXE)

# --------------------------------------------------------------------
#
#  Rule: "LinkUsingCxx(LINKOBJ,OBJS,LDFLAGS1,LDFLAGS2)"
#
#
#  LINKOBJ: The name of the resultant object file for this rule.
#       It is created by linking together the files given by
#       OBJS (see next definition).
#
#  OBJS: A list of object files which are to be linked together.
#
#  LDFLAGS1: A list of flags to be passed to $(CXX).  These flags
#       are placed before any standard flags which may be defined.
#
#  LDFLAGS2: A list of flags to be passed to $(CXX).  These flags
#       are placed after any standard flags which may be defined.
#

all $(MAKE_TARGET):: $(HS_EXE)

$(HS_EXE): $(HS_OBJS)
	$(RM) $@
	$(CXX) -o $@ $(LDFLAGS1_HS) $(DEFAULT_LDFLAGS1) $? $(DEFAULT_LDFLAGS2) \
		$(LDFLAGS2_HS) -UIMAKE_SIMLINUX_LINKUSINGCXX

clean::
	$(RM) $(HS_EXE)

# --------------------------------------------------------------------

# --------------------------------------------------------------------
#
#  Rule: "LinkUsingCxx(LINKOBJ,OBJS,LDFLAGS1,LDFLAGS2)"
#
#
#  LINKOBJ: The name of the resultant object file for this rule.
#       It is created by linking together the files given by
#       OBJS (see next definition).
#
#  OBJS: A list of object files which are to be linked together.
#
#  LDFLAGS1: A list of flags to be passed to $(CXX).  These flags
#       are placed before any standard flags which may be defined.
#
#  LDFLAGS2: A list of flags to be passed to $(CXX).  These flags
#       are placed after any standard flags which may be defined.
#

all $(MAKE_TARGET):: $(TS_EXE)

$(TS_EXE): $(TS_OBJS)
	$(RM) $@
	$(CXX) -o $@ $(LDFLAGS1_TS) $(DEFAULT_LDFLAGS1) $? $(DEFAULT_LDFLAGS2) \
		$(LDFLAGS2_TS) -UIMAKE_SIMLINUX_LINKUSINGCXX

clean::
	$(RM) $(TS_EXE)

# --------------------------------------------------------------------

# --------------------------------------------------------------------

# ====================================================================

#
#
#
#
#
#

# ====================================================================
#
#  This dependency line is found in all makefiles.  $(MAKE_TARGET)
#     should be defined in the local Imakefile.
#
# ====================================================================

all $(MAKE_TARGET):: $(ALL_OBJS)

# ====================================================================

